{"version":3,"sources":["BooksAPI.js","components/ShelfSwitcher.js","components/Book.js","components/Bookshelf.js","components/MainPage.js","components/SearchResults.js","components/Search.js","App.js","index.js"],"names":["api","token","localStorage","Math","random","toString","substr","headers","Accept","Authorization","getAll","fetch","concat","then","res","json","data","books","update","book","shelf","id","method","Object","objectSpread","Content-Type","body","JSON","stringify","search","query","ShelfSwitcher","_ref","bookInfo","changeShelf","react_default","a","createElement","className","value","onChange","e","target","disabled","Book","style","width","height","backgroundImage","imageLinks","thumbnail","components_ShelfSwitcher","title","authors","join","Bookshelf","myBooks","booksOnThisShelf","filter","name","map","components_Book","key","bookShelves","MainPage","error","components_Bookshelf","react_router_dom","to","SearchResults","searchedBooks","bk","Search","searchBooks","setSearchedBooks","_useState","useState","_useState2","slicedToArray","searchField","setSearchField","onClick","type","placeholder","val","components_SearchResults","App","setMyBooks","_useState3","_useState4","_useState5","_useState6","setError","useEffect","asyncToGenerator","regenerator_default","mark","_callee","result","wrap","_context","prev","next","BooksAPI","sent","t0","console","log","stop","this","apply","arguments","fetchData","newBooks","catch","err","length","react_router","exact","path","render","components_MainPage","components_Search","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.32120480.chunk.js","sourcesContent":["const api = \"https://reactnd-books-api.udacity.com\";\n\n// Generate a unique token for storing your bookshelf data on the backend server.\nlet token = localStorage.token;\nif (!token) token = localStorage.token = Math.random().toString(36).substr(-8);\n\nconst headers = {\n  Accept: \"application/json\",\n  Authorization: token,\n};\n\nexport const get = (bookId) =>\n  fetch(`${api}/books/${bookId}`, { headers })\n    .then((res) => res.json())\n    .then((data) => data.book);\n\nexport const getAll = () =>\n  fetch(`${api}/books`, { headers })\n    .then((res) => res.json())\n    .then((data) => data.books);\n\nexport const update = (book, shelf) =>\n  fetch(`${api}/books/${book.id}`, {\n    method: \"PUT\",\n    headers: {\n      ...headers,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ shelf }),\n  }).then((res) => res.json());\n\nexport const search = (query) =>\n  fetch(`${api}/search`, {\n    method: \"POST\",\n    headers: {\n      ...headers,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ query }),\n  })\n    .then((res) => res.json())\n    .then((data) => data.books);\n","import React from \"react\";\n\nconst ShelfSwitcher = ({ bookInfo, shelf, changeShelf }) => {\n  return (\n    <div className=\"book-shelf-changer\">\n      <select\n        value={shelf.id}\n        onChange={(e) => changeShelf(bookInfo, e.target.value)}\n      >\n        <option value=\"move\" disabled>\n          Move to...\n        </option>\n        <option value=\"currentlyReading\">Currently Reading</option>\n        <option value=\"wantToRead\">Want to Read</option>\n        <option value=\"read\">Read</option>\n        <option value=\"none\">None</option>\n      </select>\n    </div>\n  );\n};\n\nexport default ShelfSwitcher;\n","import React from \"react\";\nimport ShelfSwitcher from \"./ShelfSwitcher\";\n\nconst Book = ({ bookInfo, shelf, changeShelf }) => {\n  return (\n    <li>\n      <div className=\"book\">\n        <div className=\"book-top\">\n          <div\n            className=\"book-cover\"\n            style={{\n              width: 128,\n              height: 193,\n              backgroundImage: `url(${\n                bookInfo.imageLinks\n                  ? bookInfo.imageLinks.thumbnail\n                  : \"icons/bookNoCover.png\"\n              })`,\n            }}\n          />\n          <ShelfSwitcher\n            bookInfo={bookInfo}\n            shelf={shelf}\n            changeShelf={changeShelf}\n          />\n        </div>\n        <div className=\"book-title\">{bookInfo.title}</div>\n        <div className=\"book-authors\">\n          {bookInfo.authors ? bookInfo.authors.join(\", \") : \"No Author\"}\n        </div>\n      </div>\n    </li>\n  );\n};\n\nexport default Book;\n","import React from \"react\";\nimport Book from \"./Book\";\n\nconst Bookshelf = ({ shelf, myBooks, changeShelf }) => {\n  const booksOnThisShelf = myBooks.filter((book) => book.shelf === shelf.id);\n  return (\n    <div className=\"bookshelf\">\n      <h2 className=\"bookshelf-title\">{shelf.name}</h2>\n      <div className=\"bookshelf-books\">\n        <ol className=\"books-grid\">\n          {booksOnThisShelf.map((book) => (\n            <Book\n              bookInfo={book}\n              key={book.id}\n              shelf={shelf}\n              changeShelf={changeShelf}\n            />\n          ))}\n        </ol>\n      </div>\n    </div>\n  );\n};\n\nexport default Bookshelf;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Bookshelf from \"./Bookshelf\";\n\nconst bookShelves = [\n  { name: \"Currently reading\", id: \"currentlyReading\" },\n  { name: \"Want to Read\", id: \"wantToRead\" },\n  { name: \"Have Read\", id: \"read\" },\n];\n\nconst MainPage = ({ myBooks, changeShelf, error }) => {\n  if (error) {\n    return <h1>Something went wrong, 404</h1>;\n  }\n  return (\n    <div className=\"list-books\">\n      <div className=\"list-books-title\">\n        <h1>My Bookshelves</h1>\n        <div className=\"shelfPic\"></div>\n      </div>\n      <div className=\"list-books-content\">\n        <div>\n          {bookShelves.map((shelf) => (\n            <Bookshelf\n              shelf={shelf}\n              key={shelf.id}\n              myBooks={myBooks}\n              changeShelf={changeShelf}\n            />\n          ))}\n        </div>\n      </div>\n      <div className=\"open-search\">\n        <Link to=\"search\">\n          <button>Add a book</button>\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default MainPage;\n","import React from \"react\";\nimport Book from \"./Book\";\n\nconst SearchResults = ({ searchedBooks, changeShelf }) => {\n  return (\n    <div className=\"search-books-results\">\n      <ol className=\"books-grid\">\n        {searchedBooks.map((bk) => (\n          <Book\n            bookInfo={bk}\n            key={bk.id}\n            shelf={bk.shelf ? bk.shelf : \"none\"}\n            changeShelf={changeShelf}\n          />\n        ))}\n      </ol>\n    </div>\n  );\n};\n\nexport default SearchResults;\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport SearchResults from \"./SearchResults\";\n\nconst Search = ({\n  searchedBooks,\n  searchBooks,\n  changeShelf,\n  setSearchedBooks,\n}) => {\n  const [searchField, setSearchField] = useState(\"\");\n\n  const handleSearchField = (e) => {\n    let val = e.target.value;\n    setSearchField(val);\n    searchBooks(val);\n  };\n\n  return (\n    <div className=\"search-books\">\n      <div className=\"list-books-title\">\n        <h1>My Bookshelves</h1>\n        <div className=\"shelfPic\"></div>\n      </div>\n      <div className=\"search-books-bar\">\n        <Link to=\"/\">\n          <button\n            className=\"close-search\"\n            onClick={() => {\n              setSearchedBooks([]);\n            }}\n          >\n            Close\n          </button>\n        </Link>\n        <div className=\"search-books-input-wrapper\">\n          <input\n            type=\"text\"\n            placeholder=\"Search by title or author\"\n            value={searchField}\n            onChange={handleSearchField}\n          />\n        </div>\n      </div>\n      <SearchResults searchedBooks={searchedBooks} changeShelf={changeShelf} />\n    </div>\n  );\n};\n\nexport default Search;\n","import React, { useState, useEffect } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport * as BooksAPI from \"./BooksAPI\";\nimport \"./App.css\";\nimport MainPage from \"./components/MainPage\";\nimport Search from \"./components/Search\";\n\nfunction App() {\n  const [myBooks, setMyBooks] = useState([]);\n  const [searchedBooks, setSearchedBooks] = useState([]);\n  const [error, setError] = useState(false);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const result = await BooksAPI.getAll();\n        setMyBooks(result);\n      } catch (err) {\n        console.log(err);\n        setError(true);\n      }\n    };\n    fetchData();\n  }, []);\n\n  const changeShelf = (book, shelf) => {\n    BooksAPI.update(book, shelf).catch((err) => {\n      console.log(err);\n      setError(true);\n    });\n    let newBooks;\n    if (shelf === \"none\") {\n      newBooks = myBooks.filter((bk) => bk.id !== book.id);\n    } else {\n      book.shelf = shelf;\n      newBooks = myBooks.filter((bk) => bk.id !== book.id).concat(book);\n    }\n    setMyBooks(newBooks);\n  };\n\n  const searchBooks = (query) => {\n    if (query.length > 0) {\n      BooksAPI.search(query).then((books) => {\n        if (books.error) {\n          setSearchedBooks([]);\n        } else {\n          setSearchedBooks(books);\n        }\n      });\n    } else {\n      setSearchedBooks([]);\n    }\n  };\n\n  return (\n    <div className=\"app\">\n      <Route\n        exact\n        path=\"/\"\n        render={() => (\n          <MainPage myBooks={myBooks} changeShelf={changeShelf} error={error} />\n        )}\n      />\n      <Route\n        path=\"/search\"\n        render={() => (\n          <Search\n            searchedBooks={searchedBooks}\n            searchBooks={searchBooks}\n            changeShelf={changeShelf}\n            setSearchedBooks={setSearchedBooks}\n          />\n        )}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}